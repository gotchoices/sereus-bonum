# Web i18n Spec

Web-specific internationalization. See [shared i18n spec](../../i18n.md) for principles and dictionary format.

## File Location

```
apps/web/src/lib/i18n/
├── index.ts           # Store and helpers
└── locales/
    └── en.json        # English dictionary
```

## Implementation

```typescript
// apps/web/src/lib/i18n/index.ts
import { writable, derived, get } from 'svelte/store';
import en from './locales/en.json';

const dictionaries = { en };

export const locale = writable<'en'>('en');

export const t = derived(locale, ($locale) => {
  const dict = dictionaries[$locale];
  
  return (key: string, params?: Record<string, string | number>): string => {
    const keys = key.split('.');
    let value: any = dict;
    for (const k of keys) {
      value = value?.[k];
      if (value === undefined) return key;
    }
    if (typeof value !== 'string') return key;
    
    if (params) {
      return value.replace(/\{\{(\w+)\}\}/g, (_, k) => 
        String(params[k] ?? `{{${k}}}`)
      );
    }
    return value;
  };
});
```

## Usage

```svelte
<script>
  import { t } from '$lib/i18n';
</script>

<button>{$t('common.save')}</button>
<p>{$t('accounts.count', { count: 5 })}</p>
```

## Dictionary Content

Full English dictionary for MVP:

```json
{
  "app": {
    "name": "Bonum",
    "tagline": "Personal and business finance management"
  },
  "nav": {
    "home": "Home",
    "catalog": "Account Catalog",
    "import": "Import Books",
    "settings": "Settings"
  },
  "common": {
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete",
    "edit": "Edit",
    "close": "Close",
    "confirm": "Confirm",
    "loading": "Loading...",
    "error": "An error occurred"
  },
  "entities": {
    "title": "Entities",
    "add": "Add Entity",
    "edit": "Edit Entity",
    "delete": "Delete Entity",
    "delete_confirm": "Are you sure you want to delete this entity?",
    "no_entities": "No entities yet",
    "create_prompt": "Create one to get started"
  },
  "welcome": {
    "title": "Welcome to Bonum",
    "intro": "Bonum helps you manage personal and business finances with proper double-entry accounting.",
    "getting_started": "Getting Started",
    "select_entity": "Select an entity from the list to view its balance sheet",
    "import_books": "Import existing books from GnuCash or QuickBooks",
    "create_entity": "Create a new entity using the + button",
    "nav_tips": "Navigation Tips",
    "click_navigate": "Click any hyperlink to navigate in the current view",
    "ctrl_click": "Ctrl/Cmd + Click to open in a new window",
    "right_click": "Right-click entities for quick actions",
    "dont_show_again": "Don't show this again",
    "get_started": "Get Started"
  },
  "balance_sheet": {
    "net_worth": "Net Worth",
    "assets": "Assets",
    "liabilities": "Liabilities",
    "equity": "Equity"
  },
  "accounts": {
    "title": "Accounts",
    "view": "View Accounts",
    "import_transactions": "Import Transactions"
  }
}
```

## Refactoring Checklist

Components with hard-coded strings to update:

- [ ] `+layout.svelte`
- [ ] `+page.svelte`
- [ ] `EntityList.svelte`
- [ ] `WelcomePanel.svelte`
- [ ] `VisualBalanceSheet.svelte`
